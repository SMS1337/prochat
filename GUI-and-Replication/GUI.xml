<roblox xmlns:xmime="http://www.w3.org/2005/05/xmlmime" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://www.roblox.com/roblox.xsd" version="4">
	<External>null</External>
	<External>nil</External>
	<Item class="ScreenGui" referent="RBX9DDFFF280B5D45DD91F8F5ED99FD20AE">
		<Properties>
			<string name="Name">chatGui</string>
		</Properties>
		<Item class="Frame" referent="RBXA0F7AA77D6D84F6DB92FFDE68CB83139">
			<Properties>
				<bool name="Active">false</bool>
				<Color3 name="BackgroundColor3">4294967295</Color3>
				<float name="BackgroundTransparency">1</float>
				<Color3 name="BorderColor3">4279970357</Color3>
				<int name="BorderSizePixel">1</int>
				<bool name="ClipsDescendants">false</bool>
				<bool name="Draggable">false</bool>
				<string name="Name">Frame</string>
				<Ref name="NextSelectionDown">null</Ref>
				<Ref name="NextSelectionLeft">null</Ref>
				<Ref name="NextSelectionRight">null</Ref>
				<Ref name="NextSelectionUp">null</Ref>
				<UDim2 name="Position">
					<XS>0</XS>
					<XO>5</XO>
					<YS>0</YS>
					<YO>5</YO>
				</UDim2>
				<float name="Rotation">0</float>
				<bool name="Selectable">false</bool>
				<Ref name="SelectionImageObject">null</Ref>
				<UDim2 name="Size">
					<XS>0</XS>
					<XO>500</XO>
					<YS>0</YS>
					<YO>200</YO>
				</UDim2>
				<token name="SizeConstraint">0</token>
				<token name="Style">0</token>
				<bool name="Visible">true</bool>
				<int name="ZIndex">1</int>
			</Properties>
			<Item class="Frame" referent="RBX7D9FEC1527B54EC7988336302E7F8AD1">
				<Properties>
					<bool name="Active">false</bool>
					<Color3 name="BackgroundColor3">4294967295</Color3>
					<float name="BackgroundTransparency">1</float>
					<Color3 name="BorderColor3">4279970357</Color3>
					<int name="BorderSizePixel">1</int>
					<bool name="ClipsDescendants">false</bool>
					<bool name="Draggable">false</bool>
					<string name="Name">chatholder</string>
					<Ref name="NextSelectionDown">null</Ref>
					<Ref name="NextSelectionLeft">null</Ref>
					<Ref name="NextSelectionRight">null</Ref>
					<Ref name="NextSelectionUp">null</Ref>
					<UDim2 name="Position">
						<XS>0.00999999978</XS>
						<XO>0</XO>
						<YS>1</YS>
						<YO>5</YO>
					</UDim2>
					<float name="Rotation">0</float>
					<bool name="Selectable">false</bool>
					<Ref name="SelectionImageObject">null</Ref>
					<UDim2 name="Size">
						<XS>1</XS>
						<XO>0</XO>
						<YS>0</YS>
						<YO>20</YO>
					</UDim2>
					<token name="SizeConstraint">0</token>
					<token name="Style">0</token>
					<bool name="Visible">true</bool>
					<int name="ZIndex">1</int>
				</Properties>
				<Item class="TextLabel" referent="RBXBCB4AF2B7E2941719C5D464EE76E8BD8">
					<Properties>
						<bool name="Active">false</bool>
						<Color3 name="BackgroundColor3">4281089616</Color3>
						<float name="BackgroundTransparency">0</float>
						<Color3 name="BorderColor3">4281089616</Color3>
						<int name="BorderSizePixel">3</int>
						<bool name="ClipsDescendants">false</bool>
						<bool name="Draggable">false</bool>
						<token name="Font">6</token>
						<token name="FontSize">6</token>
						<string name="Name">char</string>
						<Ref name="NextSelectionDown">null</Ref>
						<Ref name="NextSelectionLeft">null</Ref>
						<Ref name="NextSelectionRight">null</Ref>
						<Ref name="NextSelectionUp">null</Ref>
						<UDim2 name="Position">
							<XS>1</XS>
							<XO>-100</XO>
							<YS>0</YS>
							<YO>0</YO>
						</UDim2>
						<float name="Rotation">0</float>
						<bool name="Selectable">false</bool>
						<Ref name="SelectionImageObject">null</Ref>
						<UDim2 name="Size">
							<XS>0</XS>
							<XO>100</XO>
							<YS>1</YS>
							<YO>0</YO>
						</UDim2>
						<token name="SizeConstraint">0</token>
						<string name="Text">LOADING</string>
						<Color3 name="TextColor3">4294967295</Color3>
						<bool name="TextScaled">false</bool>
						<Color3 name="TextStrokeColor3">4278190080</Color3>
						<float name="TextStrokeTransparency">0.800000012</float>
						<float name="TextTransparency">0</float>
						<bool name="TextWrapped">true</bool>
						<token name="TextXAlignment">2</token>
						<token name="TextYAlignment">1</token>
						<bool name="Visible">true</bool>
						<int name="ZIndex">2</int>
					</Properties>
				</Item>
				<Item class="TextBox" referent="RBX6AE8BC2A51B3498591B2D45277BC21E1">
					<Properties>
						<bool name="Active">false</bool>
						<Color3 name="BackgroundColor3">4281089616</Color3>
						<float name="BackgroundTransparency">0</float>
						<Color3 name="BorderColor3">4281089616</Color3>
						<int name="BorderSizePixel">3</int>
						<bool name="ClearTextOnFocus">true</bool>
						<bool name="ClipsDescendants">false</bool>
						<bool name="Draggable">false</bool>
						<token name="Font">5</token>
						<token name="FontSize">6</token>
						<bool name="MultiLine">false</bool>
						<string name="Name">input</string>
						<Ref name="NextSelectionDown">null</Ref>
						<Ref name="NextSelectionLeft">null</Ref>
						<Ref name="NextSelectionRight">null</Ref>
						<Ref name="NextSelectionUp">null</Ref>
						<UDim2 name="Position">
							<XS>0</XS>
							<XO>0</XO>
							<YS>0</YS>
							<YO>0</YO>
						</UDim2>
						<float name="Rotation">0</float>
						<bool name="Selectable">true</bool>
						<Ref name="SelectionImageObject">null</Ref>
						<UDim2 name="Size">
							<XS>1</XS>
							<XO>-100</XO>
							<YS>1</YS>
							<YO>0</YO>
						</UDim2>
						<token name="SizeConstraint">0</token>
						<string name="Text">Press &quot;/&quot; to type.</string>
						<Color3 name="TextColor3">4294967295</Color3>
						<bool name="TextScaled">true</bool>
						<Color3 name="TextStrokeColor3">4278190080</Color3>
						<float name="TextStrokeTransparency">1</float>
						<float name="TextTransparency">0</float>
						<bool name="TextWrapped">true</bool>
						<token name="TextXAlignment">0</token>
						<token name="TextYAlignment">1</token>
						<bool name="Visible">true</bool>
						<int name="ZIndex">1</int>
					</Properties>
					<Item class="Frame" referent="RBX1937F215D0FC4132AB63331823805664">
						<Properties>
							<bool name="Active">false</bool>
							<Color3 name="BackgroundColor3">4279837743</Color3>
							<float name="BackgroundTransparency">0</float>
							<Color3 name="BorderColor3">4279837743</Color3>
							<int name="BorderSizePixel">0</int>
							<bool name="ClipsDescendants">false</bool>
							<bool name="Draggable">false</bool>
							<string name="Name">Frame</string>
							<Ref name="NextSelectionDown">null</Ref>
							<Ref name="NextSelectionLeft">null</Ref>
							<Ref name="NextSelectionRight">null</Ref>
							<Ref name="NextSelectionUp">null</Ref>
							<UDim2 name="Position">
								<XS>0</XS>
								<XO>-2</XO>
								<YS>1</YS>
								<YO>0</YO>
							</UDim2>
							<float name="Rotation">0</float>
							<bool name="Selectable">false</bool>
							<Ref name="SelectionImageObject">null</Ref>
							<UDim2 name="Size">
								<XS>1</XS>
								<XO>104</XO>
								<YS>0</YS>
								<YO>3</YO>
							</UDim2>
							<token name="SizeConstraint">0</token>
							<token name="Style">0</token>
							<bool name="Visible">true</bool>
							<int name="ZIndex">10</int>
						</Properties>
					</Item>
				</Item>
				<Item class="LocalScript" referent="RBXF1BDA5E1BF4A4457A1D1E078EC36E3B9">
					<Properties>
						<bool name="Disabled">false</bool>
						<Content name="LinkedSource"><null></null></Content>
						<string name="Name">handle</string>
						<ProtectedString name="Source"><![CDATA[--[[
	This is for the local part of the chat.
	I really dislike using this but haven't been able to get it working in the main script yet.

	Organized this in latest update.

]]
--Generic variables
repeat wait() print'Waiting for player to load' until game.Players.LocalPlayer
local player = game.Players.LocalPlayer
	local mouse = player:GetMouse()

wait(1) -- For some reason it is running to fast lmao. 

--more variables
SendBtn=script.Parent.MobileSendBtn
typer = script.Parent.input
maxnumber=150
stockphrase = 'Press "/" to type.'
frame = script.Parent.Parent
UID = game:GetService("UserInputService")

--Remove CoreGUI. 
local StarterGui = game:GetService('StarterGui')
StarterGui:SetCoreGuiEnabled(Enum.CoreGuiType.Chat, false)

--Temporary fix for mobile users
if UID.TouchEnabled==true then
	frame.Size = UDim2.new(0,250,0,200)
	stockphrase='Tap to start typing.'
	typer.Text=stockphrase
	SendBtn.Visible=true
end
	
--Captures focus	
function animate()
	typer.Text = ""
	typer:CaptureFocus()
	for i = 0.5,0,-.1 do
		game:GetService("RunService").RenderStepped:wait()
		typer.TextTransparency=i
		script.Parent.char.TextTransparency=i
	end
end

-- This is for detecting the mention
function detectMention(message)	
	repeat wait() until message:findFirstChild'msg'
	for w in string.gmatch(message.msg.Text, "%a+") do
	    if string.len(w)>1 and string.lower(w)==string.lower(string.sub(player.Name,1,string.len(w))) then
	    	message.msg.TextColor3=Color3.new(39/255, 174/255, 96/255)
			message.msg.TextStrokeTransparency=0.1
	    end
	    if player:FindFirstChild(".nickname") then
			if string.len(w)>1 and string.lower(w)==string.lower(string.sub(player:FindFirstChild(".nickname").Value,1,string.len(w))) then
				message.msg.TextColor3=Color3.new(39/255, 174/255, 96/255)
				message.msg.TextStrokeTransparency=0.1
			end
		end
	end
end

-- To send the message
function send()
	if typer.Text ~= stockphrase and typer.Text ~= "" and typer.Text ~=" " then
		--Good good, let's continue.
		if game.ReplicatedStorage:findFirstChild'ProChat' then
			game.ReplicatedStorage.ProChat.ProChatted:FireServer(string.sub(typer.Text,0,maxnumber))
			typer.Text = stockphrase

		--Animations
			for i = 0,0.5,.1 do
				game:GetService("RunService").RenderStepped:wait() --loveya
				typer.TextTransparency=i
				script.Parent.char.TextTransparency=i
			end

		end		
	end
end

-- Detect keyboard input
UID.InputBegan:connect(function(input)
	if input.KeyCode == Enum.KeyCode.Return then
		send()
		typer.Text = stockphrase
	end

	if input.KeyCode == Enum.KeyCode.Slash then
		if typer.Text==stockphrase then
			animate()
		end
	end
	
	if input.KeyCode == Enum.KeyCode.Escape then
		typer.Text = stockphrase
	end
end)

-- This will fire when the mobile button is clicked.
SendBtn.MouseButton1Click:connect(function()
	send()
end)

--This will fire when a message is added.
script.Parent.Parent.ChildAdded:connect(function(c)
	repeat wait() until c:findFirstChild('name')
	if c:IsA'Frame' and c.Name=="message" and string.lower(c.name.Text)~=string.lower(" "..player.Name..":") then detectMention(c) end
end)


--This is to track the character count of the textbox, ugly because I can't find a proper event.
-- if someone finds a better way to do it, pls do a pull request. 
game.ReplicatedStorage.ProChat.OnGuiSpawn:FireServer()
while wait() do
	local number = string.len(script.Parent.input.Text)
	--Fill the label
	if typer.Text ~= stockphrase and typer.Text ~= "" then
		script.Parent.char.Text = maxnumber-number.." characters left"
	else
		number=0
		script.Parent.char.Text = maxnumber-number.." characters left"
	end
	--Set the color
	if number>(maxnumber-(maxnumber/3)) then
		script.Parent.char.TextColor3=Color3.new(212/255, 19/255, 22/255)
		else
		script.Parent.char.TextColor3=Color3.new(10/255, 151/255, 212/255)
	end
	--Set it back to the correct length.
	if number>maxnumber then
		typer.Text = string.sub(typer.Text,0,maxnumber)
	end 
end]]></ProtectedString>
					</Properties>
				</Item>
				<Item class="TextButton" referent="RBXBC30CB42154A4FF0BD688946AA859DCA">
					<Properties>
						<bool name="Active">true</bool>
						<bool name="AutoButtonColor">true</bool>
						<Color3 name="BackgroundColor3">4279837743</Color3>
						<float name="BackgroundTransparency">0</float>
						<Color3 name="BorderColor3">4279837743</Color3>
						<int name="BorderSizePixel">3</int>
						<bool name="ClipsDescendants">false</bool>
						<bool name="Draggable">false</bool>
						<token name="Font">5</token>
						<token name="FontSize">7</token>
						<bool name="Modal">false</bool>
						<string name="Name">MobileSendBtn</string>
						<Ref name="NextSelectionDown">null</Ref>
						<Ref name="NextSelectionLeft">null</Ref>
						<Ref name="NextSelectionRight">null</Ref>
						<Ref name="NextSelectionUp">null</Ref>
						<UDim2 name="Position">
							<XS>0</XS>
							<XO>0</XO>
							<YS>1</YS>
							<YO>5</YO>
						</UDim2>
						<float name="Rotation">0</float>
						<bool name="Selectable">false</bool>
						<bool name="Selected">false</bool>
						<Ref name="SelectionImageObject">null</Ref>
						<UDim2 name="Size">
							<XS>1</XS>
							<XO>0</XO>
							<YS>0</YS>
							<YO>20</YO>
						</UDim2>
						<token name="SizeConstraint">0</token>
						<token name="Style">0</token>
						<string name="Text">Tap To Send</string>
						<Color3 name="TextColor3">4293848814</Color3>
						<bool name="TextScaled">false</bool>
						<Color3 name="TextStrokeColor3">4293848814</Color3>
						<float name="TextStrokeTransparency">0.800000012</float>
						<float name="TextTransparency">0</float>
						<bool name="TextWrapped">false</bool>
						<token name="TextXAlignment">2</token>
						<token name="TextYAlignment">1</token>
						<bool name="Visible">false</bool>
						<int name="ZIndex">1</int>
					</Properties>
				</Item>
			</Item>
		</Item>
	</Item>
</roblox>
